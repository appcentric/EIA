<?xml version="1.0" encoding="ISO-8859-1" ?>
<project name="WLDeploy" default="all" basedir=".">


  <property environment="env"/>

	<fail message="Please set the EIA_HOME as environment variable">
			<condition>
			   <not>
				   <isset property="env.EIA_HOME" />
			  </not>
			</condition>
	</fail>

	<fail message="Please set the JAVA_HOME as environment variable">
			<condition>
			   <not>
				   <isset property="env.JAVA_HOME" />
			  </not>
			</condition>
	</fail>

	<fail message="Please set the ANT_HOME as environment variable">
			<condition>
			   <not>
				   <isset property="env.ANT_HOME" />
			  </not>
			</condition>
	</fail>

	<tstamp>
	  <format property="deploy.timestamp"
			  pattern="yyyy-MM-DD-hhmmss.SSS"
			  locale="en,US"/>
	 </tstamp>

    <!--echo>Deploy Time Stamp ${deploy.timestamp}</echo-->


	<condition property="target.env" value="wisoad">
		    <isset property="target.env"/>
	</condition>

    <!--echo>Deploy Time Stamp ${deploy.timestamp}</echo-->

    <echo>EIA Home ${env.EIA_HOME} Target Environment ${target.env}</echo>

	<property file="${env.EIA_HOME}/config/EIAbuild-${target.env}.properties"/>

	<path id="wlappc.classpath">
	<fileset dir="${wl_home}/server/lib">
	<include name="weblogic.jar"/>
	</fileset>
	</path>

<taskdef name="wldeploy" classpathref="wlappc.classpath" classname="weblogic.ant.taskdefs.management.WLDeploy"
classpath="${wl_home}/server/lib/weblogic.jar:${wn.bea.home}/oracle_common/modules/oracle.jps_11.1.1/jps-common.jar:${wn.bea.home}/oracle_common/modules/oracle.jps_11.1.1/jps-api.jar:${wn.bea.home}/oracle_common/modules/oracle.jps_11.1.1/jps-internal.jar"
	 />
<target name="deploy">
	<wldeploy action="deploy" name="${deploy.name}"
		 		source="${deploy.source}"
				user="${server.user}"
				nostage="true"
				library="${library.mode}"
				password="${server.password}"
				verbose="true"
				debug="true"
				remote="true"
				upload="true"
				adminurl="t3://${admin.server.host}:${admin.server.port}"
				targets="${server_targets}"/>
</target>
<target name="undeploy">
	<wldeploy action="undeploy"
				name="${deploy.name}"
				user="${server.user}"
				password="${server.password}"
				verbose="true"
				library="${library.mode}"
				debug="true"
				adminurl="t3://${admin.server.host}:${admin.server.port}"
				targets="${server_targets}" />
</target>
</project>


